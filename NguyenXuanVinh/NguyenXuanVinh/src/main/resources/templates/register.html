<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>ÄÄƒng KÃ½ - Mystery Box</title>
    <link rel="stylesheet" href="/css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        .login-box { max-width: 400px; margin: 50px auto; padding: 40px; background: #16213e; border-radius: 15px; text-align: center; border: 1px solid #0f3460; }
        .form-group { margin-bottom: 20px; text-align: left; }
        .form-group label { display: block; margin-bottom: 5px; color: #ccc; }
        .form-control { width: 100%; padding: 10px; border-radius: 5px; border: none; background: #0f3460; color: #fff; }
        .btn-submit { width: 100%; padding: 12px; background: #2ecc71; color: white; border: none; border-radius: 5px; font-weight: bold; cursor: pointer; }
        .btn-submit:hover { background: #27ae60; }
        .link { margin-top: 15px; display: block; color: #ffd700; text-decoration: none; }
    </style>
</head>
<body>
<div class="login-box">
    <h2 style="color:#2ecc71; margin-bottom:30px;">ğŸ“ ÄÄ‚NG KÃ Má»šI</h2>
    <div class="form-group">
        <label>TÃªn Ä‘Äƒng nháº­p</label>
        <input type="text" id="username" class="form-control">
    </div>
    <div class="form-group">
        <label>Máº­t kháº©u</label>
        <input type="password" id="password" class="form-control">
    </div>
    <div class="form-group">
        <label>Há» vÃ  tÃªn</label>
        <input type="text" id="fullName" class="form-control">
    </div>
    <div class="form-group">
        <label>Email</label>
        <input type="email" id="email" class="form-control">
    </div>
    <button class="btn-submit" onclick="register()">Táº O TÃ€I KHOáº¢N</button>
    <a href="/login" class="link">ÄÃ£ cÃ³ tÃ i khoáº£n? ÄÄƒng nháº­p</a>
</div>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
    function register() {
        const data = {
            username: document.getElementById('username').value,
            password: document.getElementById('password').value,
            fullName: document.getElementById('fullName').value,
            email: document.getElementById('email').value
        };

        fetch('/api/auth/register', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(data)
        })
        .then(async response => {
            const text = await response.text();
            if (response.ok) {
                Swal.fire('ThÃ nh cÃ´ng', text, 'success').then(() => {
                    window.location.href = '/login';
                });
            } else {
                Swal.fire('Lá»—i', text, 'error');
            }
        });
    }
</script>
</body>
</html>